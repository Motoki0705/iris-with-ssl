# I-01 結果まとめ — Iris 可視化ユーティリティ実装（Level 2）

## 概要
- `src/ml/iris/plotting.py` に Iris 専用の散布図ユーティリティを実装し、種別ごとのスタイル割当と図表保存の一貫性を確保した。
- `build_species_style_map` は 5 種類以上の色・マーカー組合せをローテーションし、`target` 列のみのフレームでも人間可読なラベルへ変換する。
- `scatter_feature_pair` / `plot_feature_grid` は `ml.core.visualization.save_fig` を介して `docs/results/figures/` 配下へ保存し、保存パスを図オブジェクトに格納する。

## 実装ハイライト
- `IRIS_TARGET_TO_SPECIES` マップを導入し、`species` 列が存在しないデータフレームでも種名を解決。
- スタイルバンク（`SPECIES_STYLE_BANK`）は色・マーカー・サイズ・アルファ・縁取りを定義し、同一種でも視認性を高めた。
- `plot_feature_grid` はチケット ID プレフィックスと特徴量名からファイル名を生成し、複数図の一括出力を行う。

## テスト
- 追加: `tests/iris/test_plotting.py`
  - スタイルマップのユニーク性と 5 種類以上の色×マーカー組合せを検証。
  - `scatter_feature_pair`・`plot_feature_grid` の保存処理と返却値を確認。
- 実行: `source .venv-wsl/bin/activate && uv run --active pytest tests/iris/test_plotting.py`（3 件成功 / 2.42s）。

## 出力アセット
- 図: `docs/results/figures/I-01_petal_length_petal_width.png`
- テストスクリプト: `tests/iris/test_plotting.py`
- 実装: `src/ml/iris/plotting.py`

## 利用例
```python
from ml.core.datasets import load_iris_dataset
from ml.iris.plotting import IRIS_TARGET_TO_SPECIES, build_species_style_map, plot_feature_grid

frame = load_iris_dataset()
species = [IRIS_TARGET_TO_SPECIES[target] for target in frame["target"]]
style_map = build_species_style_map(species)

saved_paths = plot_feature_grid(
    frame,
    feature_pairs=[("sepal.length (cm)", "sepal.width (cm)"), ("petal.length (cm)", "petal.width (cm)")],
    style_map=style_map,
    ticket_id="I-01",
)
```
`saved_paths` は保存された図の絶対パスを保持するため、ノートブックやレポート生成フローでそのまま参照できる。
